(this["webpackJsonpimages-viewer"]=this["webpackJsonpimages-viewer"]||[]).push([[0],{40:function(e,t,n){},42:function(e,t,n){},43:function(e,t,n){},44:function(e,t,n){},45:function(e,t,n){},46:function(e,t,n){},47:function(e,t,n){},48:function(e,t,n){},49:function(e,t,n){},54:function(e,t,n){},55:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n(16),r=n.n(c),s=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,56)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,r=t.getLCP,s=t.getTTFB;n(e),a(e),c(e),r(e),s(e)}))},o=n(7),i=n(17),l=n(19),u=n(6),h=n(4),j=n.n(h),d=n(3),b=n(22),p=n.n(b),g=n(26),v="GET_PHOTOS_START",f="GET_PHOTOS_SUCCES",O="GET_PHOTOS_ERROR",m="SAVE_SEARCH_SUCCESS",x="CLEAR_ALL_SEARCHES_SUCCESS",y=function(){var e=Object(g.a)(p.a.mark((function e(t,n){var a,c,r,s,o;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Object(u.a)(Object(u.a)({},n),{},{api_key:"2AKoz9U2oRHriOMf7IYEgJVrhagwKNAeCbCC6AsT"}),c=a.rover,delete a.rover,a.page||(a.page=1),e.prev=4,t({type:v}),e.next=8,fetch("".concat("https://api.nasa.gov/mars-photos/api/v1/rovers","/").concat(c,"/photos?").concat(j.a.stringify(a)));case 8:if(!((s=e.sent).status>=400&&s.status<600)){e.next=11;break}throw s.statusText;case 11:return e.next=13,s.json();case 13:o=e.sent,t({type:f,photos:o.photos,completedPhotosList:(null===(r=o.photos)||void 0===r?void 0:r.length)<25,firstPage:1===parseInt(a.page)}),e.next=21;break;case 17:throw e.prev=17,e.t0=e.catch(4),t({type:O,error:"".concat(e.t0,", please try again")}),e.t0;case 21:case 22:case"end":return e.stop()}}),e,null,[[4,17]])})));return function(t,n){return e.apply(this,arguments)}}(),S=(n(40),n(1)),C=function(e){var t=e.options,n=e.label,a=e.secondary,c=e.value,r=e.onChange,s=a?"select-content secondary":"select-content";return Object(S.jsxs)("div",{className:s,children:[n&&Object(S.jsx)("label",{children:n}),Object(S.jsxs)("select",{value:c,onChange:function(e){var t=e.target.value;return r(t)},children:[""===c&&Object(S.jsx)("option",{value:"empty",children:"Select an option..."},"empty"),t.map((function(e,t){return Object(S.jsx)("option",{value:e.key,children:e.name},t)}))]})]})},w=n.p+"static/media/marte.aa5e4619.png",E=(n(42),[{key:"curiosity",name:"Curiosity"},{key:"opportunity",name:"Opportunity"},{key:"spirit",name:"Spirit"}]),N=function(e){var t=e.history,n=e.clearFilters,a=Object(o.b)(),c=j.a.parse(t.location.search);return Object(S.jsxs)("div",{className:"header",children:[Object(S.jsxs)("a",{href:"#",className:"logo",onClick:n,children:[Object(S.jsx)("img",{src:w,height:"50",width:"50",alt:"Mars logo"}),Object(S.jsx)("h2",{children:"Rover Mars"})]}),Object(S.jsxs)("section",{className:"main-filters",children:[Object(S.jsx)(C,{options:E,value:c.rover?c.rover:"",onChange:function(e){c=Object(u.a)(Object(u.a)({},c),{},{rover:e,page:1}),t.push("?".concat(j.a.stringify(c)))}}),Object(S.jsx)("button",{onClick:function(){var e=window.prompt("Please enter a search name, otherwise search wont be saved");if(e){var t=j.a.stringify(c).toString();!function(e,t){e({type:m,search:t})}(a,{searchName:e,id:t,filters:j.a.stringify(c)})}},children:"Save Current Search"})]})]})},_=n(14),k=(n(43),function(e){var t=e.label,n=e.type,a=e.value,c=e.onChange;return Object(S.jsxs)("div",{className:"input-content",children:[t&&Object(S.jsx)("label",{children:t}),Object(S.jsx)("input",{type:n,value:a,onChange:function(e){var t=e.target.value;return c(t)}})]})}),A=(n(44),function(e){var t=e.label,n=e.value,a=e.onChange,c="";if(n){var r=(n=new Date(n)).getFullYear(),s=n.getMonth()+1<10?"0".concat(n.getMonth()+1):n.getMonth()+1,o=n.getDate()<10?"0".concat(n.getDate()):n.getDate();c="".concat(r,"-").concat(s,"-").concat(o)}return Object(S.jsxs)("div",{className:"date-content",children:[t&&Object(S.jsx)("label",{children:t}),Object(S.jsx)("input",{type:"date",value:c,onChange:function(e){var t=e.target.value;return a(t)}})]})}),M=(n(45),void 0),L=[{key:"FHAZ",name:"Front Hazard Avoidance Camera"},{key:"RHAZ",name:"Rear Hazard Avoidance Camera"},{key:"MAST",name:"Mast Camera"},{key:"CHEMCAM",name:"\tChemistry and Camera Complex"},{key:"MAHLI",name:"Mars Hand Lens Imager"},{key:"MARDI",name:"Mars Descent Imager"},{key:"NAVCAM",name:"Navigation Camera"},{key:"PANCAM",name:"Panoramic Camera"},{key:"MINITES",name:"Miniature Thermal Emission Spectrometer (Mini-TES)"}],T=function(e){var t=e.history,n=e.savedSearches,a=Object(o.b)(),c=j.a.parse(t.location.search),r=function(e,n){var a;c=Object(u.a)(Object(u.a)({},c),{},(a={},Object(_.a)(a,e,n),Object(_.a)(a,"page",1),a)),t.push("?".concat(j.a.stringify(c)))};return Object(S.jsxs)("div",{className:"searchbox",children:[Object(S.jsx)("h1",{children:"Mars Rover Photos"}),Object(S.jsxs)("section",{className:"filters",children:[Object(S.jsx)(k,{options:L,secondary:!0,label:"Select Sol Date",value:c.sol,type:"number",onChange:r.bind(M,"sol")}),Object(S.jsx)(C,{options:L,secondary:!0,label:"Select Camera",value:c.camera?c.camera:"",onChange:r.bind(M,"camera")}),Object(S.jsx)(A,{label:"Select Earth Day",onChange:r.bind(M,"earth_date"),value:c.earth_date})]}),Object(S.jsxs)("section",{className:"saved-searches",children:[Object(S.jsx)(C,{options:n.map((function(e){return Object(u.a)(Object(u.a)({},e),{},{key:e.id,name:e.searchName})})),secondary:!0,label:"Saved Searches",value:j.a.stringify(c)?j.a.stringify(c):"",onChange:function(e){var a=n.find((function(t){return t.id===e})),c=j.a.parse(a.filters);t.push("?".concat(j.a.stringify(c)))}.bind(M)}),Object(S.jsx)("button",{onClick:function(){window.confirm("Are you sure you want delete all searches?")&&function(e){e({type:x})}(a)},children:"Clear All Searches"})]})]})},D=(n(46),function(e){var t=e.photo,n=t.rover,a=n.landing_date,c=n.launch_date,r=a?new Date(a).toLocaleDateString():"-",s=c?new Date(c).toLocaleDateString():"-";return Object(S.jsxs)("div",{className:"photo",children:[Object(S.jsx)("img",{src:t.img_src,alt:"Rover"}),Object(S.jsxs)("div",{className:"description",children:[Object(S.jsx)("strong",{children:"Landing Date:"}),"\xa0",r,Object(S.jsx)("br",{}),Object(S.jsx)("strong",{children:"Launch Date:"}),"\xa0",s,Object(S.jsx)("br",{})]})]})}),P=(n(47),function(e){var t=e.list;return Object(S.jsx)("div",{className:"photos",children:t.map((function(e){return Object(S.jsx)(D,{photo:e},e.id)}))})}),H=(n(48),function(){return Object(S.jsx)("div",{className:"loader"})}),I=(n(49),function(e){var t=e.text,n="message";return e.danger&&(n="".concat(n," danger")),Object(S.jsx)("div",{className:n,children:Object(S.jsx)("h3",{children:t})})}),R=function(e){var t=Object(a.useState)(!1),n=Object(l.a)(t,2),c=n[0],r=n[1],s=function(){window.innerHeight+document.documentElement.scrollTop!==document.documentElement.offsetHeight||c||r(!0)};return Object(a.useEffect)((function(){return window.addEventListener("scroll",s),function(){return window.removeEventListener("scroll",s)}}),[]),Object(a.useEffect)((function(){c&&e()}),[c]),[c,r]},F=Object(d.e)((function(e){var t=e.history,n=Object(d.d)(),c=n.search,r=j.a.parse(c),s=Object(o.b)(),i=Object(o.c)((function(e){return e.photos})),h=Object(o.c)((function(e){return e.error})),b=Object(o.c)((function(e){return e.loading})),p=Object(o.c)((function(e){return e.savedSearches})),g=Object(o.c)((function(e){return e.completedPhotosList})),v=R((function(){g||b||h||setTimeout((function(){var e=parseInt(r.page),n=Object(u.a)(Object(u.a)({},r),{},{page:e+1});t.push("?".concat(j.a.stringify(n))),m(!1)}),1e3)})),f=Object(l.a)(v,2),O=f[0],m=f[1],x={sol:1e3,rover:"curiosity",page:1,earth_date:(new Date).toLocaleDateString()};return Object(a.useEffect)((function(){""===n.search?t.push("?".concat(j.a.stringify(x))):y(s,r)}),[n]),Object(S.jsxs)("section",{children:[Object(S.jsx)(N,{clearFilters:function(){t.push("?".concat(j.a.stringify(x)))},history:t}),Object(S.jsx)(T,{savedSearches:p,history:t}),i.length>0&&Object(S.jsx)(P,{list:i}),0===i.length&&!h&&Object(S.jsx)(I,{text:"No photos found with current filters"}),O&&!g&&!h&&Object(S.jsx)(H,{}),i.length>0&&g&&Object(S.jsx)(I,{text:"No more photos to load"}),h&&Object(S.jsx)(I,{danger:!0,text:h})]})})),J=n(20),U=n(28),z=n(27),G=n.n(z)()({photos:[],completedPhotosList:!1,loading:!1,savedSearches:JSON.parse(localStorage.getItem("__savedSearches")||"[]")}),V=Object(U.a)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:G,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case f:var n;return n=t.firstPage?t.photos:[].concat(Object(J.a)(e.photos),Object(J.a)(t.photos)),e.merge({photos:n,completedPhotosList:t.completedPhotosList,loading:!1});case O:return e.merge({error:t.error,loading:!1});case v:return e.merge({loading:!1});case m:var a=[].concat(Object(J.a)(e.savedSearches),[t.search]);return localStorage.setItem("__savedSearches",JSON.stringify(a)),e.merge({savedSearches:a});case x:return localStorage.removeItem("__savedSearches"),e.merge({savedSearches:[]});default:return e}}));n(54);r.a.render(Object(S.jsx)(o.a,{store:V,children:Object(S.jsx)(i.a,{children:Object(S.jsx)(F,{})})}),document.getElementById("root")),s()}},[[55,1,2]]]);
//# sourceMappingURL=main.e65532ba.chunk.js.map